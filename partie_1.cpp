#include <iostream>
using namespace std;

int tabrot_sommet[24][8] = {
    {0,1,2,3,4,5,6,7},{3,0,1,2,7,4,5,6},{2,3,0,1,6,7,4,5},{1,2,3,0,5,6,7,4},
    {4,0,3,7,5,1,2,6},{7,4,0,3,6,5,1,2},{3,7,4,0,2,6,5,1},{0,3,7,4,1,2,6,5},
    {1,5,6,2,0,4,7,3},{2,1,5,6,3,0,4,7},{6,2,1,5,7,3,0,4},{5,6,2,1,4,7,3,0},
    {3,2,6,7,0,1,5,4},{7,3,2,6,4,0,1,5},{6,7,3,2,5,4,0,1},{2,6,7,3,1,5,4,0},
    {4,5,1,0,7,6,2,3},{0,4,5,1,3,7,6,2},{1,0,4,5,2,3,7,6},{5,1,0,4,6,2,3,7},
    {7,6,5,4,3,2,1,0},{4,7,6,5,0,3,2,1},{5,4,7,6,1,0,3,2},{6,5,4,7,2,1,0,3}
};

int tableau_sommet_allumes[15][8] = {
    {0,0,0,0,0,0,0,0},{0,0,0,1,0,0,0,0},{0,0,1,1,0,0,0,0},
    {0,0,0,1,0,0,1,0},{1,1,1,0,0,0,0,0},{1,1,1,1,0,0,0,0},
    {1,1,1,0,0,0,0,1},{0,1,0,1,1,0,1,0},{1,1,0,1,1,0,0,0},
    {1,1,1,0,1,0,0,0},{0,0,0,1,0,1,0,0},{0,0,1,1,0,1,0,0},
    {0,0,1,0,0,1,0,1},{0,1,0,1,0,1,0,1},{1,1,0,1,0,1,0,0}
};

int config_box[15][13] = {
    {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
    {0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
    {0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
    {1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1},
    {1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
    {0,3,8,1,2,10,-1,-1,-1,-1,-1,-1,-1},
    {9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1},
    {2,3,8,2,8,10,10,8,9,-1,-1,-1,-1},
    {3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
    {0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1},
    {1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1},
    {1,11,2,1,9,11,9,8,11,-1,-1,-1,-1},
    {3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1},
    {0,10,1,0,8,10,8,11,10,-1,-1,-1,-1},
    {3,9,0,3,11,9,11,10,9,-1,-1,-1,-1}
};


int look_up_table[256][13];


void init_lookup()
{
    for(int i=0;i<256;i++)
        for(int j=0;j<13;j++)
            look_up_table[i][j] = -1;
}


int calcul_index(int s[8])
{
    int index = 0;
    for(int i=0;i<8;i++)
        index |= (s[i] << i);
    return index;
}


void rotation(int base, int rot, int out[8])
{
    for(int i=0;i<8;i++)
        out[ tabrot_sommet[rot][i] ] = tableau_sommet_allumes[base][i];
}

void construire_lookup()
{
    int sommets_rot[8];

    for(int b=0;b<15;b++)
    {
        for(int r=0;r<24;r++)
        {
            for(int i=0;i<8;i++) sommets_rot[i]=0;

            rotation(b,r,sommets_rot);
            int index = calcul_index(sommets_rot);

            if(look_up_table[index][0] != -1) continue;

            for(int k=0;k<13;k++)
                look_up_table[index][k] = config_box[b][k];
        }
    }
}


void afficher_lookup()
{
    for(int i = 0; i < 256; i++)
    {
        cout << "index " << i << " : ";
        for(int j = 0; j < 13; j++)
        {
            cout << look_up_table[i][j] << " ";
        }
        cout << endl;
    }
}

int main()
{
    init_lookup();
    construire_lookup();
    afficher_lookup();
    return 0;
}
